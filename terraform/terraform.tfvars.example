# =============================================================================
# AWS Voice Agent - Terraform Variables Example
# =============================================================================
# Copy this file to terraform.tfvars and fill in your values.
# IMPORTANT: Never commit terraform.tfvars to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# Project Configuration
# -----------------------------------------------------------------------------

project_name = "voice-agent"
environment  = "dev"  # Options: dev, staging, prod
aws_region   = "us-east-1"

# -----------------------------------------------------------------------------
# Resource Tags
# -----------------------------------------------------------------------------

tags = {
  Project     = "voice-agent"
  Environment = "dev"
  ManagedBy   = "terraform"
  Owner       = "your-email@example.com"
  Purpose     = "Voice Agent Infrastructure"
}

# -----------------------------------------------------------------------------
# VPC Configuration
# -----------------------------------------------------------------------------

vpc_config = {
  cidr_block           = "10.0.0.0/16"
  enable_dns_hostnames = true
  enable_dns_support   = true
  single_nat_gateway   = true  # Set to false for production HA
}

availability_zones = ["us-east-1a", "us-east-1b"]

# -----------------------------------------------------------------------------
# Connect Configuration
# -----------------------------------------------------------------------------

# Use existing Connect instance (set to null to create new one)
existing_connect_instance_id = null  # Or: "12345678-1234-1234-1234-123456789012"

connect_config = {
  instance_alias           = "my-voice-agent"
  identity_management_type = "CONNECT_MANAGED"
  inbound_calls_enabled    = true
  outbound_calls_enabled   = true
  contact_flow_name        = "VoiceAgentFlow"
  auto_accept_calls        = false
}

# -----------------------------------------------------------------------------
# Lambda Configuration
# -----------------------------------------------------------------------------

lambda_config = {
  runtime           = "python3.11"
  timeout           = 30
  memory_size       = 256
  log_retention     = 14
  reserved_concurrency = -1  # No limit
  environment_variables = {
    LOG_LEVEL = "INFO"
  }
}

# -----------------------------------------------------------------------------
# S3 Configuration
# -----------------------------------------------------------------------------

s3_config = {
  versioning_enabled = true
  force_destroy      = true  # Set to false for production
  lifecycle_rules = {
    recordings = {
      transition_days      = 30
      expiration_days      = 90
      storage_class        = "STANDARD_IA"
    }
    transcripts = {
      transition_days      = 30
      expiration_days      = 365
      storage_class        = "STANDARD_IA"
    }
  }
}

# -----------------------------------------------------------------------------
# Bedrock Configuration
# -----------------------------------------------------------------------------

bedrock_config = {
  model_id                 = "anthropic.claude-3-5-sonnet-20241022-v2:0"
  max_tokens               = 1024
  temperature              = 0.7
  guardrail_enabled        = true
  guardrail_blocked_topics = ["illegal_activities", "harmful_content"]
}

# -----------------------------------------------------------------------------
# CloudWatch Configuration
# -----------------------------------------------------------------------------

cloudwatch_config = {
  log_retention_days   = 30
  enable_dashboard     = true
  enable_alarms        = true
  alarm_email          = "your-email@example.com"
  metrics_namespace    = "voice-agent"
}

# -----------------------------------------------------------------------------
# Lex Configuration
# -----------------------------------------------------------------------------

lex_config = {
  enabled          = true
  bot_name         = "voice-agent-bot"
  description      = "Voice Agent Intent Recognition Bot"
  idle_session_ttl = 300
  data_privacy     = { child_directed = false }
}

# -----------------------------------------------------------------------------
# Neptune Configuration (Optional)
# -----------------------------------------------------------------------------

neptune_config = {
  enabled               = false
  instance_class        = "db.t3.medium"
  cluster_size          = 1
  backup_retention_days = 7
  preferred_backup_window = "02:00-03:00"
  engine_version        = "1.2.1.0"
  port                  = 8182
  iam_authentication    = true
  deletion_protection   = false
}

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------

security_config = {
  enable_encryption_at_rest    = true
  enable_encryption_in_transit = true
  kms_key_deletion_window      = 7
  enable_vpc_endpoints         = true
  enable_cloudtrail            = true
}

# -----------------------------------------------------------------------------
# Production Configuration (Security & Monitoring)
# -----------------------------------------------------------------------------

production_config = {
  # Alerting
  enable_alerting              = true
  alert_email                  = "your-email@example.com"

  # Security Services
  enable_security_services     = true
  enable_vpc_flow_logs         = true
  enable_guardduty             = true
  enable_security_hub          = true
  enable_aws_config            = true

  # Secrets & Backup
  enable_secrets_manager       = true
  enable_backup                = true

  # Cost Management
  monthly_budget_usd           = 500  # Set to 0 to disable

  # Alarm Thresholds
  lambda_duration_threshold_ms = 10000
  lambda_concurrency_threshold = 50
  enable_anomaly_detection     = true

  # Backup Retention
  daily_backup_retention_days   = 7
  weekly_backup_retention_days  = 35
  monthly_backup_retention_days = 365
}

# -----------------------------------------------------------------------------
# Integration Secrets (Optional - stored in AWS Secrets Manager)
# -----------------------------------------------------------------------------
# These are stored securely in Secrets Manager, not in plain text.
# Leave as REPLACE_ME if you don't have integrations yet.

secrets_config = {
  crm_api_url    = ""              # Your CRM API endpoint (e.g., https://api.salesforce.com)
  crm_api_key    = "REPLACE_ME"    # Your CRM API key
  webhook_secret = "REPLACE_ME"    # Secret for webhook signature verification
}
